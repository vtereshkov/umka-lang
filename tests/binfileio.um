import "std.um"

fn write(name, s: str) {
	f, err := std::fopen(name, "wb")
	std::exitif(err)
	std::fwrite(f, &[]char(s))
} 

fn read(name: str): str {
	f, err := std::fopen(name, "rb")
	std::exitif(err)
	data, err := std::freadall(f)
	std::exitif(err)
	return str(data)
}

fn test1() {
	name := "fio.txt"
	write(name, "Hello World")
	printf(read(name) + '\n')
	std::remove(name)	
}

fn test2() {
	f, err := std::fopen("galjkgaklgjkajg", "jgksjgksjgksjg")
	std::assert(f == null)
}

fn test*() {
	test1()
	test2()
}

fn main() {
	test()
}